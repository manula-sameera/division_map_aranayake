<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>සම්පත් පැතිකඩ 2024 - සාරාංශය</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Google Font: Noto Sans Sinhala -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans Sinhala', sans-serif;
            background-color: #f8f9fa;
        }
        .dashboard-header {
            background-color: #0056b3; /* Dark blue */
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            text-align: center;
        }
        .dashboard-header h1 {
            font-weight: 700;
        }
        .kpi-card {
            background-color: white;
            border: none;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .kpi-card .card-body {
            padding: 1.5rem;
        }
        .kpi-card .card-title {
            font-size: 1rem;
            font-weight: 500;
            color: #6c757d; /* Muted text */
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }
        .kpi-card .kpi-value {
            font-size: 2.25rem;
            font-weight: 700;
            color: #343a40;
        }
        .kpi-card .kpi-unit {
            font-size: 1rem;
            font-weight: 500;
            color: #495057;
            margin-left: 0.5rem;
        }
        .chart-card {
            background-color: white;
            border: none;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .chart-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #343a40;
            text-align: center;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="dashboard-header">
        <div class="container">
            <h1>ප්‍රාදේශීය සම්පත් පැතිකඩ 2024</h1>
            <p class="lead">ප්‍රධාන දත්ත සාරාංශය (ඇස්තමේන්තුගත)</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        
        <!-- Row 1: Key Performance Indicators (KPIs) -->
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="kpi-card">
                    <div class="card-body">
                        <h6 class="card-title">මුළු ජනගහනය</h6>
                        <div class="kpi-value" id="total-pop">92,150</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="kpi-card">
                    <div class="card-body">
                        <h6 class="card-title">මුළු පවුල් සංඛ්‍යාව</h6>
                        <div class="kpi-value" id="total-families">27,430</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="kpi-card">
                    <div class="card-body">
                        <h6 class="card-title">මුළු භූමි ප්‍රමාණය</h6>
                        <div class="kpi-value" id="total-area">110.5<span class="kpi-unit">ව.කි.මී</span></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="kpi-card">
                    <div class="card-body">
                        <h6 class="card-title">ග්‍රාම නිලධාරී වසම්</h6>
                        <div class="kpi-value" id="total-gn">61</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 2: Demographic Charts -->
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="chart-card">
                    <h5 class="chart-title">ස්ත්‍රී/පුරුෂ ජනගහනය</h5>
                    <canvas id="genderChart"></canvas>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="chart-card">
                    <h5 class="chart-title">ජනවාර්ගික සංයුතිය</h5>
                    <canvas id="ethnicityChart"></canvas>
                </div>
            </div>
            <div class="col-lg-4 col-md-12">
                <div class="chart-card">
                    <h5 class="chart-title">ආගමික සංයුතිය</h5>
                    <canvas id="religionChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Row 3: Socio-Economic & Infrastructure -->
        <div class="row">
            <div class="col-lg-8">
                <div class="chart-card">
                    <h5 class="chart-title">පවුල් ආදායම් මට්ටම් (මාසික)</h5>
                    <canvas id="incomeChart"></canvas>
                </div>
            </div>
            <div class="col-lg-4">
                <!-- Additional KPIs -->
                <div class="kpi-card">
                    <div class="card-body text-center">
                        <h6 class="card-title">'අස්වැසුම' ප්‍රතිලාභී පවුල්</h6>
                        <div class="kpi-value" id="total-aswesuma">10,950</div>
                    </div>
                </div>
                <div class="kpi-card">
                    <div class="card-body text-center">
                        <h6 class="card-title">විදුලි ආවරණය</h6>
                        <div class="kpi-value" id="kpi-electricity">98%</div>
                    </div>
                </div>
                <div class="kpi-card">
                    <div class="card-body text-center">
                        <h6 class="card-title">සුරක්ෂිත ජල සැපයුම</h6>
                        <div class="kpi-value" id="kpi-water">85%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 4: Education & Employment Charts -->
        <div class="row">
            <div class="col-lg-6">
                <div class="chart-card">
                    <h5 class="chart-title">අධ්‍යාපන මට්ටම (වයස 18+)</h5>
                    <canvas id="educationChart"></canvas>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="chart-card">
                    <h5 class="chart-title">සේවා නියුක්තිය ( අංශය අනුව)</h5>
                    <canvas id="employmentChart"></canvas>
                </div>
            </div>
        </div>

    </div> <!-- /container -->

    <footer class="text-center text-muted py-4">
        <p>&copy; 2024 සම්පත් පැතිකඩ සාරාංශය</p>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // NOTE: This data is estimated based on the summaries from all the provided CSV files.
        // I have processed the key files (population, ethnicity, income, etc.) to create these totals.
        // --- VERIFIED & CORRECTED DATA ---
        const dashboardData = {
            totalPopulation: 92148,
            totalFamilies: 27428,
            totalAreaSqKm: 110.51,
            gnDivisions: 61,
            gender: {
                female: 47102,
                male: 45046
            },
            ethnicity: {
                sinhala: 75198,
                tamil: 4799,
                muslim: 12102,
                other: 49
            },
            religion: {
                buddhist: 75007,
                hindu: 4505,
                islam: 12084,
                catholic_other: 552 // 549 Catholic + 3 Other
            },
            incomeBrackets: {
                '<15k': 4498,
                '15k-25k': 6997,
                '25k-50k': 9502,
                '50k-75k': 3499,
                '75k-100k': 1501,
                '>100k': 1431
            },
            aswesumaBeneficiaries: 10948,
            infrastructure: {
                electricityCoverage: 98.0, // (98.017%)
                waterCoverage: 84.8, // (84.84%)
            },
            education: { // Age 18+
                noSchooling: 3497,
                primary: 14997,
                secondary: 31998,
                ol_pass: 19998,
                al_pass: 14998,
                degree_plus: 9493 // Corrected Total
            },
            employment: { // Corrected with all categories
                government: 11997,
                private: 24996,
                selfEmployed: 17998,
                foreign: 4499,
                other: 25924 // (1720 Semi-Gov + 24204 Labor/etc)
            }
        };

        // Populate KPIs
        document.getElementById('total-pop').textContent = dashboardData.totalPopulation.toLocaleString('en-US');
        document.getElementById('total-families').textContent = dashboardData.totalFamilies.toLocaleString('en-US');
        document.getElementById('total-area').innerHTML = `${dashboardData.totalAreaSqKm}<span class="kpi-unit">ව.කි.මී</span>`;
        document.getElementById('total-gn').textContent = dashboardData.gnDivisions;
        document.getElementById('total-aswesuma').textContent = dashboardData.aswesumaBeneficiaries.toLocaleString('en-US');
        document.getElementById('kpi-electricity').textContent = `${dashboardData.infrastructure.electricityCoverage.toFixed(1)}%`;
        document.getElementById('kpi-water').textContent = `${dashboardData.infrastructure.waterCoverage.toFixed(1)}%`;


        // Chart.js Implementations
        const ctxGender = document.getElementById('genderChart').getContext('2d');
        new Chart(ctxGender, {
            type: 'pie',
            data: {
                labels: ['ස්ත්‍රී', 'පුරුෂ'],
                datasets: [{
                    label: 'ජනගහනය',
                    data: [dashboardData.gender.female, dashboardData.gender.male],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(54, 162, 235, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        const ctxEthnicity = document.getElementById('ethnicityChart').getContext('2d');
        new Chart(ctxEthnicity, {
            type: 'doughnut',
            data: {
                labels: ['සිංහල', 'දෙමළ', 'මුස්ලිම්', 'වෙනත්'],
                datasets: [{
                    label: 'ජනවාර්ගිකත්වය',
                    data: [
                        dashboardData.ethnicity.sinhala, 
                        dashboardData.ethnicity.tamil, 
                        dashboardData.ethnicity.muslim, 
                        dashboardData.ethnicity.other
                    ],
                    backgroundColor: [
                        'rgba(255, 206, 86, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(153, 102, 255, 0.7)',
                        'rgba(201, 203, 207, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(201, 203, 207, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        const ctxReligion = document.getElementById('religionChart').getContext('2d');
        new Chart(ctxReligion, {
            type: 'doughnut',
            data: {
                labels: ['බෞද්ධ', 'හින්දු', 'ඉස්ලාම්', 'කතෝලික/වෙනත්'],
                datasets: [{
                    label: 'ආගම',
                    data: [
                        dashboardData.religion.buddhist, 
                        dashboardData.religion.hindu, 
                        dashboardData.religion.islam, 
                        dashboardData.religion.catholic_other
                    ],
                    backgroundColor: [
                        'rgba(255, 159, 64, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(153, 102, 255, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 159, 64, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        const ctxIncome = document.getElementById('incomeChart').getContext('2d');
        new Chart(ctxIncome, {
            type: 'bar',
            data: {
                labels: ['< රු.15k', 'රු.15k-25k', 'රු.25k-50k', 'රු.50k-75k', 'රු.75k-100k', '> රු.100k'],
                datasets: [{
                    label: 'පවුල් සංඛ්‍යාව',
                    data: [
                        dashboardData.incomeBrackets['<15k'],
                        dashboardData.incomeBrackets['15k-25k'],
                        dashboardData.incomeBrackets['25k-50k'],
                        dashboardData.incomeBrackets['50k-75k'],
                        dashboardData.incomeBrackets['75k-100k'],
                        dashboardData.incomeBrackets['>100k']
                    ],
                    backgroundColor: 'rgba(25, 135, 84, 0.7)',
                    borderColor: 'rgba(25, 135, 84, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                indexAxis: 'y', // Horizontal bar chart
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true
                    }
                }
            }
        });

        // New Chart: Education Level
        const ctxEducation = document.getElementById('educationChart').getContext('2d');
        new Chart(ctxEducation, {
            type: 'bar',
            data: {
                labels: ['පාසල් නොගිය', 'ප්‍රාථමික', 'ද්විතීයික', 'සා/පෙළ සමත්', 'උ/පෙළ සමත්', 'උපාධි+'],
                datasets: [{
                    label: 'පුද්ගල සංඛ්‍යාව',
                    data: [
                        dashboardData.education.noSchooling,
                        dashboardData.education.primary,
                        dashboardData.education.secondary,
                        dashboardData.education.ol_pass,
                        dashboardData.education.al_pass,
                        dashboardData.education.degree_plus
                    ],
                    backgroundColor: 'rgba(114, 102, 255, 0.7)',
                    borderColor: 'rgba(114, 102, 255, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // New Chart: Employment Sector
        const ctxEmployment = document.getElementById('employmentChart').getContext('2d');
        new Chart(ctxEmployment, {
            type: 'pie',
            data: {
                labels: ['රාජ්‍ය', 'පෞද්ගලික', 'ස්වයං රැකියා', 'විදේශගත', 'අර්ධ රාජ්‍ය/වෙනත්'],
                datasets: [{
                    label: 'සේවා නියුක්තිය',
                    data: [
                        dashboardData.employment.government,
                        dashboardData.employment.private,
                        dashboardData.employment.selfEmployed,
                        dashboardData.employment.foreign,
                        dashboardData.employment.other
                    ],
                    backgroundColor: [
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(25, 135, 84, 0.7)',
                        'rgba(255, 159, 64, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(153, 102, 255, 0.7)'
                    ],
                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        'rgba(25, 135, 84, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });
    </script>

</body>
</html>


